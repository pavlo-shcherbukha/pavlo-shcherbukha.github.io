---
layout: post
title: "Learning IBM API-Connect"
date: 2024-11-15 10:00:01
categories: [Python, Flask]
permalink: posts/2024-11-15/ibm_api_connect/
published: false
---

<!-- TOC BEGIN -->
- [1. Постановка проблеми](#p1)
- [2. Gро коцепцію продукта в моєму зрозумінні](#p2)
- [3. Опис тестового стенду для вичення API-Connect](#p3)




- [2.1. Бібіліотека формалізовних описів API](#p2.1)
- [2.2. API-GateWay](#p2.1)
- [2.3. Каталоги опублікованих API](#p2.1)
- [2.4. Система логування та збору статистики використання](#p2.1)
- [2.5. Портал споживачів API](#p2.1)
- [2.6. Система адміністрування користувачів API Connect та порталу Споживачів API](#p2.1)


<!-- TOC END -->

## <a name="p1">1. Постановка проблеми</a>

Про продукт IBM API-Connect я чув давно, десь 3 2017-2018 року. Його характеризували як дуже гнучкий і зручний. Не зважаючи на гнучкість продукту я ні разу не пройшов 
весь процес його викристання. Але цього разу все ж таки пройшов більшість кроків, щоб  надати "гнучкому" продукту "форму" і заставити його гнутися "як треба", тобто пройти 
основні процеси (чи потоки) використання API-Connect. Для вивчення я використав хмарну версію цьго продукта, що була розгорнута в IBM Cloud.  Здається, в рамках *"IBM CloudPack 
for Integration"* існує версія, що розгортається в OpenShift  локального дата-центру, но це не точно. Тому всі мої досліди виконувалися в рамках IBM Cloud. Обговорювати 
які продукти є конкурентами IBM API-Connect  я не хочу. Для цього можна покласти руку на клавіатуру і погуглити. Якщо шукати по youtube
інформацію, як працювати з IBM API-Connect, то в більшості випадків це:
- про застарілі версії продукту;
- показують примітивні приклади, при чому, часто один і той же;
- ну і нігде мені не попадаолс побачити весь процес. Максимум в пісочниці продукту показати, що api працює.
Тому і було прийнто рішення написати цей блог, щоб поділитися своїм досвідом з вивчення IBM API-Connect, ну і самому не забути, і ,якщо потрібно, швидко відновити ці знання.

## <a name="p2">2. Про коцепцію продукта в моєму зрозумінні</a>

Перш за все потрібно сказати кілька слів про концепцію продукта в моєму зрозумінні. IBM API-Connect призначений для того, щоб компанія, яка вирішила виставити свої Web Servise 
як API  "в світ" мала можливість: 
- управляти  API а технічному рівні; 
- управляти різними варіантами захисту ваших API
- управляти API на рівні документації для споживачів цих АПІ та навчанню споживачів використовувати надані їм API; 
- управляти рівнем соціалізаціцї АПІ (тобто отримувати  feed back від спживачів API,  та  оперативно давати їм рекомендаціцї)  
- Отримувати статистику використання API в різних розрізах з подальшою можливістю монетизації 


Робота з API Connect починається з **фази Розробки (Development)**, де визначаються дві сутності:
- **API**;
Тут готується формалізований опис API. На [pic-01](#pic-01) показано головне меню, де шукати.
<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-01.png" /></kbd>
<p style="text-align: center;"><a name="pic-01">pic-01</a></p>

На [pic-02](#pic-02) показано головне вікно з каталогом API,  що я створив в  API-Connect.

<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-02.png" /></kbd>
<p style="text-align: center;"><a name="pic-02">pic-02</a></p>


На [pic-03](#pic-03) показано головне вікно з каталогом Products,  що створив  в  API Connect.

<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-03.png" /></kbd>
<p style="text-align: center;"><a name="pic-03">pic-03</a></p>



- **Product**;
Це формалізована сутність, що поєднує в собі один або кілька API, та додає в нього тарифний план: кількість викликів за одиницю часу [pic-04](#pic-04).

<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-04.png" /></kbd>
<p style="text-align: center;"><a name="pic-04">pic-04</a></p>

Крім того продукт має свій життєвий цикл: 
- версійність;
- публікацію  **Product** для використання або зворотній процес - виведення **Produc** з використання.


Після закінчення фази розробки настає наступна фаза **Публікація продукту** в каталог  **Catalog** (або Catalogs). 
- *Catalog* - це ще одна сутність API Connect в яку публікються **Product**, а відповідно, і **API**, що пов'язані з цим Product.
Catalog має свої (ізольовані) сутності, що забезпечує експулатацію Products  та APIs що входять до цього каталога.
Вже до окремого взятого Catalog  підключаються споживачі API,  ведеться реєстр споживачів API,  ведеться статистика використання API  в різних розрізах, і з Catalog  
можна запустити портал споживача API. Звичайно, в кожному каталозі є адміністратор каталога та інші користувачі, що можуть ним управляти. 
У цих користувачів є чітко обмежений перелік ролей:

- Owner:	Owns and administers the API provider organization	
- API Administrator:  Manages the API product lifecycle
- Community Manager: Manages application developer communities
- Administrator: Administers the API provider organization
- Developer: Authors API and product definitions
- Member: Minimum role
- Viewer: Views the API provider organization


На [pic-05](#pic-05) показано створено каталог Catalogs та як в нього попасти

<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-05.png" /></kbd>
<p style="text-align: center;"><a name="pic-05">pic-05</a></p>

А на [pic-06](#pic-06) внутрішні сутності  Catalog

<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-06.png" /></kbd>
<p style="text-align: center;"><a name="pic-06">pic-06</a></p>

- **Portal** споживача  API
По суті це WebSite , що пов'язаний з Catalog.  Через нього споживачі API  модуть прочитати документацію на всі API  що входять в цей каталог, отримати свої credentials (ну якщо API захищені). Є режим Try it  де можнаспробувати виклакати методи API.  
Також є форму, де споживач API  може задати пиання чи написати свої враження про кромео взяти API.  Є блог, в якому можна написати якість там рекомендаціцї чи щось корисне для споживачів API.
Споживач API  теж може перешлянути статистику використання свої[] викликів  API.

Створюється портал через Catalog так, як показано на [pic-07](#pic-07):

<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-07.png" /></kbd>
<p style="text-align: center;"><a name="pic-07">pic-07</a></p>


А основні елементи порталу, показані на [pic-08](#pic-08)


<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-08.png" /></kbd>
<p style="text-align: center;"><a name="pic-08">pic-08</a></p>



Навіть зважаючи на наведене, можна зрозуміти що API-Conect - це не тільки по IT-шників в образі програмістів, чи служби підтримки. 
Це і про спеціалістів про розвиирк цифрового бізнесу.
Це і про контент менеджерів для управління порталу.
Ну і адміністратори безпеки иам якість повинні бути і розуміти, що і для чого вони адмініструють.
Ну і хтось повинен статистику перетворити в рахунок для клієнта-споживача API




Але  найскладнішою для мене була частина розробки та тестування API. Тому з нього і почну
Робота з продуктом починається з завантаження (чи підготовки) формалізованого опису API. Можна використовувати OpenApi3.0, OpenAPi2.0, SOAP WSDL.  Але я використовував тільки OpenApi3.
Тому далі, мова буде тільки про OpenApi3.0. Формалізований опис повинен бути виконаний дуже акуратно з достатньою кількісю коментарів та деталізації, тому що ним, потім, будуть користуватися споживачі api. 
 


### <a name="p3">3. Опис тестового стенду для вичення API-Connect</a>


Архітектура тестового стенду показана на [pic-09](#pic-09). Для тестування створено два Node.js Web Service: 
- WebService1;
- WebService2.
<kbd><img src="../assets/img/posts/2024-11-15-ibm-api-connect/doc/pic-09.png" /></kbd>
<p style="text-align: center;"><a name="pic-08">pic-09</a></p>

вони задеплоєні на контейненій безсерверній платформі IBM [Code Engine](https://pavlo-shcherbukha.github.io/posts/2023-05-11/ibmcloud-codeengine/) ну і 
на зовні виставлені публічні routs для доступу по http. Публічний роути зроблені тому, щоб порівнювати роботу через API-Connect та без нього.
Ну і в навчальних цілях, щоб не мучитися з прокопуванням каналів. 



IBM API-Connect складається, з  таких основних компонентів:

### <a name="p2.1">2.1. Бібіліотека формалізовних описів API</a>



### <a name="p2.2">2.2. API-GateWay</a>
### <a name="p2.3">2.3. Каталоги опублікованих API</a>
### <a name="p2.4">2.4. Система логування та збору статистики використання</a>
### <a name="p2.5">2.5. Портал споживачів API</a>
### <a name="p2.6">2.6. Система адміністрування користувачів API Connect та порталу Споживачів API</a>






