---
layout: post
title: "Applicaion data pipeline - –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç"
date: 2025-12-16 10:00:01
categories: [azure, yolo8, open-cv, python, azure durable function, az-204]
permalink: posts/2025-12-16/az-datapipeline-ua/
published: true
---

<!-- TOC BEGIN -->

- [1. –ü—Ä–æ —â–æ —Ü–µ–π –±–ª–æ–≥](#p-1")
- [2. Edge Layer (–ú–µ–∂–∞): –†–æ–∑—É–º–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è –Ω–∞ Raspberry Pi 5](#p-2)
- [3. –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ-—Ñ–∞–π–ª—ñ –≤ —Ö–º–∞—Ä—ñ](#p-3)
- [3.1. –†–µ–∞–∫—Ü—ñ—è —Ö–º–∞—Ä–∏ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π —Ñ–∞–π–ª](#p-3.1)
- [3.2. Orchestration (–î–∏—Ä–∏–≥–µ–Ω—Ç) –æ–±—á–∏—Å–ª–µ–Ω—å: Durable Functions](#p-3.2)
- [3.3. Heavy Lifting (–û–±—Ä–æ–±–∫–∞): AI –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö](#p-3.3)
- [3.4. Feedback Loop: –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è](#p-3.4)
- [4. –û—Ü—ñ–Ω–∫–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω–Ω—è](#p-4)
- [5. –ü—ñ–¥—Å—É–º–∫–æ–≤—ñ –¥—É–º–∫–∏](#p-5)



<!-- TOC END -->

## <a name="p-1">1. –ü—Ä–æ —â–æ —Ü–µ–π –±–ª–æ–≥</a>

–¶–µ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –±–ª–æ–≥—ñ–≤ –ø—Ä–æ —Å–µ—Ä–≤—ñ—Å–∏ azure:
- [AZURE AZ-204 AZ BLOB STORAGE - –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç](https://pavlo-shcherbukha.github.io/posts/2025-10-16/az-204-blob-strg-ua/);
- [AZURE AZ-204 FOR DEVELOPERS](https://pavlo-shcherbukha.github.io/posts/2024-01-30/az-204-dev/),

—â–æ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –ø–æ –∫—É—Ä—Å—É az-204. –Ø —à—É–∫–∞–≤ –∑–∞–¥–∞—á—É –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞, —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ azure durable function. –§–∞–∫—Ç–∏—á–Ω–æ, –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –±—É–ª–∞ —ñ–¥–µ—è –¥–ª—è —è–∫–æ–≥–æ—Å—å –≤–∞–∂–∫–æ–≥–æ –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É. –ù–∞–π–±—ñ–ª—å—à –æ—á–µ–≤–∏–¥–Ω–æ—é —ñ–¥–µ—î—é, —â–æ –ø—Ä–∏–π—à–ª–∞ –≤ –≥–æ–ª–æ–≤—É, —Ü–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–∞–º–µ—Ä—É —ñ –æ–±—Ä–æ–±–∏—Ç–∏ –≤—ñ–¥–µ–æ —Ñ–∞–π–ª. –Ü–Ω—à–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ –ø–æ—á–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ computer vision. –ù–∞–∑–≤–∞–≤ —è —Ü—é —ñ–¥–µ—é: **"–í—ñ–¥–µ–æ—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞ –¥–∞—á—ñ"**.  

**–°—É—Ç—å —ñ–¥–µ—ó** –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ–± –∫–∞–º–µ—Ä—É —á–∏ –∫–∞–º–µ—Ä–∏ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –Ω–∞ –¥–∞—á—ñ –¥–æ raspberry PI. –ù–∞ Raspberry  —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É –¥–µ—Ç–µ–∫—Ü—ñ—é —Ä—É—Ö—É. –£ –≤–∏–ø–∞–¥–∫—É –¥–µ—Ç–µ–∫—Ü—ñ—ó –ø–∏—Å–∞—Ç–∏ 30 —Å–µ–∫—É–Ω–¥ –≤—ñ–¥–µ–æ. –ü–æ—Ç—ñ–º –∑–∞–ø–∏—Å–∞–Ω–µ –≤—ñ–¥–µ–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –≤ —Ö–º–∞—Ä—É azure  –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –≤–∂–µ "–≤–∞–∂–∫–∏–º–∏" —ñ–Ω—Å—Ç—É–º–µ–Ω—Ç–∞–º–∏, –∞ —Å–∞–º–µ: –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –≤—ñ–¥–µ–æ —á–µ—Ä–µ–∑ –Ω–µ–π—Ä–æ–º–µ—Ä–µ–∂—É –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó –æ–±'—î–∫—Ç—ñ–≤, —â–æ —î –Ω–∞  –∫–∞–¥—Ä–∞—Ö. –ê –≤—Å—ñ –¥–µ—Ç–µ–∫—Ç–æ–≤–∞–Ω—ñ –∫–∞–¥—Ä–∏ –∑–±–µ—Ä–µ–≥—Ç–∏ –≤ –æ–∫—Ä–µ–º–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ (container  –Ω–∞ azure BlobStorage), —â–æ –ø–æ–≤'–∑–∞–Ω–∏–π –∑ —Ü–∏–º –≤—ñ–¥–µ–æ.
–Ø–∫—â–æ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –∑—ñ —Å—Ç–æ—Ä–æ–Ω–∏ –æ—Ü—ñ–Ω–∫–∏ –≤–∫–ª–∞–¥–µ–Ω–æ—ó –ø—Ä–∞—Ü—ñ —ñ —á–∞—Å—É, —Ç–æ —ñ–¥–µ—è –Ω–∞–¥—Ç–æ —Å–∫–ª–∞–¥–Ω–∞. –ù–∞–±–∞–≥–∞—Ç–æ –ø—Ä–æ—Å—Ç—ñ—à–µ –∫—É–ø–∏—Ç–∏ —Ä–æ—É—Ç–µ—Ä, tplink tapo –∫–∞–º–µ—Ä—É. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–∞–º–µ—Ä—É –¥–æ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É tapo —ñ —è–∫–æ—ó—Å—å –∫–∏—Ç–∞–π—Å—å–∫–æ—ó —Ö–º–∞—Ä–∏ —ñ –∑–∞ —É–º–æ–≤–Ω–∏—Ö 200 –≥—Ä–∏–≤–µ–Ω—å —É –≤–∞—Å –ø—Ä–∞—Ü—é—î –≤—ñ–¥–µ–æ—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è, –ø—Ä–∏—á–æ–º—É, –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –∫–∞–º–µ—Ä–∏, —Ç–∞–º —ñ –∑–≤—É–∫ –≤ –æ–±–∏–¥–≤–∞ –Ω–∞–ø—Ä—è–º–∫–∏ –ø—Ä–∞—Ü—é—î. 

–ê–ª–µ —è–∫—â–æ —Ü—ñ–ª—å –≤ —Ç–æ–º—É —â–æ–±:

- –Ω–∞–≤—á–∏—Ç–∏—Å—è –ø—Ä–æ–µ–∫—Ç—É–≤–∞—Ç–∏ —ñ —Ä–æ–∑—Ä–æ–±–ª—è—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ –¥–æ–¥–∞—Ç–∫–∏ –≤ —Ö–º–∞—Ä—ñ,
- –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —à–∞–±–ª–æ–Ω –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ data pipeline  –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑—ñ —à—Ç—É—á–Ω–∏–º —ñ–Ω—Ç–µ–ª–µ–∫—Ç–æ–º,
- –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —à–∞–±–ª–æ–Ω  –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É —Ç–∏–ø—É "—Ä–æ–∑—É–º–Ω–∏–π –±—É–¥–∏–Ω–æ–∫" —á–∏ "—Ü–∏—Ñ—Ä–æ–≤—ñ –¥–≤—ñ–π–Ω–∏–∫–∏" -  —Ç–æ –Ω–∞ –º—ñ–π –æ—Å–æ–±–∏—Ç—Å–∏–π –ø–æ–≥–ª—è–¥,  —Ç–∞–∫–∞ —Ä–æ–±–æ—Ç–∞ –º–∞—î —Å–µ–Ω—Å.

–ê–ª–µ –∑–Ω–æ–≤—É –∂, —Ç–∞–∫ —è–∫ —Ü–µ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç, —Ç–æ –≤–∏–π—à–æ–≤ —Ç–∞–∫–∏–π —Å–æ–±—ñ  ¬´–ü—Ä–æ–µ–∫—Ç-—Ñ–ª—é–≥–µ—Ä¬ª  —á–∏ –ø–æ—Ä–æ–µ–∫—Ç "–ì–æ–ø–∞–∫ –Ω–∞ –≥—Ä–∞–±–ª—è—Ö".

–£–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ–¥–∞—Ç–∫—É –ø–æ–∫–∞–∑–∞–Ω–∞ –Ω–∞ [pic-01](#pic-01)

<kbd><img src="../assets/img/posts/2025-12-16-az-datapipeline/doc/pic-01.png" /></kbd>
<p style="text-align: center;"><a name="pic-01">pic-01</a></p>

## <a name="p-2">2. Edge Layer (–ú–µ–∂–∞): –†–æ–∑—É–º–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è –Ω–∞ Raspberry Pi 5</a>

–î–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∫–∞–º–µ—Ä–∏ —Ç–∞  edge –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é –≤–∏–±—Ä–∞–≤ rtsp –ø—Ä–æ—Ç–æ–∫–æ–ª. –¶–µ –¥–æ—Å–∏—Ç—å –Ω–µ –∑–∞–ª–µ–∂–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, —á–µ—Ä–µ–∑ —è–∫–∏–π –º–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–∞–º–µ—Ä—É, —á–∏ –º–æ–±—ñ–ª—å–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –∑ –¥–æ–¥–∞—Ç–∫–æ–º wifi-–∫–∞–º–µ—Ä–∞ (ip-–∫–∞–º–µ—Ä–∞). –¶–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ –¥–∞—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –≤—Å—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∫–∞–º–µ—Ä —è–∫–æ–≥–æ—Å—å –≤–∏—Ä–æ–±–Ω–∏–∫–∞. –ê–ª–µ –º–µ–Ω—ñ –Ω–µ –≤–¥–∞–ª–æ—Å—è –∑–Ω–∞–π—Ç–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –ø–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—é —Ç–∏–º–∏ –∂ –∫–∞–º–µ—Ä–∞–º–∏ tp-link tapo. –¢–æ–º—É —è –≤–∏–∫–æ—Ä–∞—Å—Ç–∞–≤ —Ç–æ–π –ø—Ä–æ—Ç–æ–∫–ª, —â–æ –¥–æ–±—Ä–µ –≤—ñ–¥–æ–º–∏–π —ñ –¥–æ —è–∫–æ–≥–æ —î –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏.
–í —è–∫–æ—Å—Ç—ñ Edge –∫–æ–º–ø'—é—Ç–µ—Ä–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ Raspberry PI 5 –∑ 8 –º–µ–≥–∞–±–∞–π—Ç–∞–º–∏ –ø–∞–º'—è—Ç—ñ —Ç–∞ SD-–∫–∞—Ä—Ç–∏–æ—é –Ω–∞ 64 –ì–ë. –î–ª—è –æ–±—Ä–æ–±–∫–∏ —Ç—Ä–∞—Ñ—ñ–∫—É –≤—ñ–¥ –∫–∞–º–µ—Ä–∏ –Ω–∞ Raspberry PI –Ω–∞–ø–∏—Å–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –Ω–∞ Python –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ open-cv.  –î–ª—è —à–≤–∏–¥–∫–æ—ó –æ–±—Ä–æ–±–∫–∏ –∫–∞–¥—Ä—ñ–≤ –≤—ñ–¥–µ–æ Raspberry PI 5  –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —ñ–¥–µ–∞–ª—å–Ω–æ. –ù—É —ñ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Ä–æ–±–æ—Ç–∏ –∫–æ–º'—é—Ç–µ—Ä–∞ –ø—Ä–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è—Ö —Å–≤—ñ—Ç–ª–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ –î–ë–ñ 5V/5A UPS Module 3S.
–î–µ—Ç–µ–∫—Ü—ñ—è —Ä—É—Ö—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ open-cv. –Ø–∫—â–æ —Ä—É—Ö –≤–∏—è–≤–ª–µ–Ω–æ, —Ç–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∑–∞–ø–∏—Å –≤—ñ–¥–µ–æ –Ω–∞ –¥–∏—Å–∫ –ø—Ä–æ—Ç—è–≥–æ–º 30 —Å–µ–∫—É–Ω–¥. –ö–æ–ª–∏  –∑–∞–ø–∏—Å –∑–∞–∫—ñ–Ω—á–µ–Ω–æ, —Ñ–∞–π–ª –∑ –≤—ñ–¥–µ–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –≤ —Ö–º–∞—Ä—É azure –Ω–∞ –º—ñ–π BlobStorage. –ù–∞ —Ü—å–æ–º—É, —Ä–æ–±–æ—Ç–∞ Edge –∫–æ–º'—é—Ç–µ—Ä–∞ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è, –∞ –ø–æ–¥–∞–ª—å—à–∞ –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤–∂–µ —É —Ö–º–∞—Ä—ñ.
–¢–∞–∫ —è–∫ Raspberry 5  –º–∞—î –±–∞–≥–∞—Ç–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –ø–æ—Ä—Ç—ñ–≤ - —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å Edge –∫–æ–º–ø'—é—Ç–µ—Ä–∞ –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–∏–≤—à–∏ –¥–∞—Ç—á–∏–∫–∏ —á–∏ —è–∫—ñ—Å—å —ñ–Ω—à—ñ –ø—Ä–∏–ª–∞–¥–∏, –¥–ª—è  –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞ –ø–µ—Ä–µ–¥–∞—á—É —ó—Ö –≤ —Ö–º–∞—Ä—É.


## <a name="p-3">3. –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ-—Ñ–∞–π–ª—ñ –≤ —Ö–º–∞—Ä—ñ</a>

### <a name="p-3.1">3.1. –†–µ–∞–∫—Ü—ñ—è —Ö–º–∞—Ä–∏ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π —Ñ–∞–π–ª</a>

    –Ø–∫ —Ç—ñ–ª—å–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ, Azure Event Grid –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ ¬´–ø—ñ–¥—Ö–æ–ø–ª—é—î¬ª —Ü—é –ø–æ–¥—ñ—é.
    –í—ñ–Ω –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —Å–∏–≥–Ω–∞–ª (HTTP trigger) –¥–æ –Ω–∞—à–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Äî Azure Durable Function. –ê–ª–µ –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ —è —â–µ –Ω–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞–≤ —Ä–æ–±–æ—Ç—É –∑ EventGriid, —Ö–æ—á–∞ —è —É–∂–µ —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–∞–≤ —ó—ó –≤  –ø—Ä–æ–µ–∫—Ç—ñ "–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è Blob- –ø–æ–ª—ñ–≤ –∑ OracleDB –Ω–∞ azure blob storage":  [Function eventGridTrigger1 - process events triggered by Azure Blob Storage when a new file is created](https://github.com/pavlo-shcherbukha/oracle-to-blobstorage-azfunc#function-eventgridtrigger1---process-events-triggered-by-azure-blob-storage-when-a-new-file-is-created). 

    –ù–∞ –ø–æ—Ç–æ—á–Ω–∏–π –º–æ–º–µ–Ω—Ç —è –∑–∞–ø—É—Å–∫–∞—é –æ–±—Ä–æ–±–∫—É –≤—Ä—É—á–Ω—É.  

### <a name="p-3.2">3.2. Orchestration (–î–∏—Ä–∏–≥–µ–Ω—Ç) –æ–±—á–∏—Å–ª–µ–Ω—å: Durable Functions</a>

–¶–µ —Å–µ—Ä—Ü–µ —Å–∏—Å—Ç–µ–º–∏. –§—É–Ω–∫—Ü—ñ—è –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ–Ω—É—î –∫–æ–¥, –≤–æ–Ω–∞ –∫–µ—Ä—É—î —Å–∫–ª–∞–¥–Ω–∏–º –ø—Ä–æ—Ü–µ—Å–æ–º:
- –í–æ–Ω–∞ –∑–∞–ø—É—Å–∫–∞—î Azure Container Instance (ACI).
- –í–æ–Ω–∞ –ø–µ—Ä–µ–¥–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (URL –≤—ñ–¥–µ–æ) —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- –í–æ–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —É —Å—Ç–∞–Ω ¬´–æ—á—ñ–∫—É–≤–∞–Ω–Ω—è¬ª, –Ω–µ —Å–ø–æ–∂–∏–≤–∞—é—á–∏ —Ä–µ—Å—É—Ä—Å–∏ (—ñ –≤–∞—à—ñ –≥—Ä–æ—à—ñ), –ø–æ–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∞—Ü—é—î.

–ü–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä durable —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–≤–∏–Ω–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–æ–¥—ñ—ó –≤ EventGrid. –ü–û–∫–∏ —â–æ, –¥–ª—è –ø–æ–≥–ª–∏–±–ª–µ–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, —è –∑–∞–ø—É–∫–∞—é –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —à–ª—è—Ö–æ–º http - –≤–∏–∫–ª–∏–∫—É. –û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å durablr function —Ç–∞–∫–∞, —â–æ –≤–æ–Ω–∏ state full, –Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ —Ä–µ–≥—É–ª—è—Ä–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π. –ö—Ä—ñ–º —Ç–æ–≥–æ, durablr function –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ª–µ–≥–∫–æ –±—É–¥—É–≤–∞—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ-–ø–∞—Ä–∞–ª–µ–ª—å–Ω—É –æ–±—Ä–æ–±–∫—É  –∑–∞–¥–∞—á, —Ç–∞ —Å–∏—Å—Ç–µ–º–∏, —â–æ —É–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –ø–æ–¥—ñ—è–º–∏. –¢–æ–±—Ç–æ, —Ü–µ —Ç–∞–∫–∏–π —Å–æ–±—ñ **BPM** —â–æ –æ–ø–∏—Å—É—î—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–º –∫–æ–¥–æ–º. 
–í –ø–æ—Ç–æ—á–Ω—ñ–π –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î —è–∫  –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, —â–æ —Ä–µ–∞–≥—É—î –Ω–∞ –ø–æ–¥—ñ—ó:

- –°—Ç–∞—Ä—Ç—É—î —Ä–æ–±–æ—Ç—É –ø–æ —Ç—Ä–∏–º–∞–Ω–Ω—ñ http-–∑–∞–ø–∏—Ç—É. –í–æ–Ω–∞ –Ω–µ —Ç—Ä–∏–º–∞—î http  –∑'—î–¥–Ω–∞–Ω–Ω—è –ø–æ–∫–∏ –ø—Ä–∞—Ü—é—î —Ñ—É–Ω–∫—Ü—ñ—è. –í–æ–Ω–∞ –æ—Ç—Ä–∏–º–∞–ª–∞ –∑–∞–ø–∏—Ç, –∑–∞–ø—É—Å—Ç–∏–ª–∞ –ø—Ä–æ—Ü–µ—Å, –¥–∞–ª–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ–º —ñ "–∑–∞—Å–∏–Ω–∞—î". 

–û—Å—å –ø—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:
```json
{
    "id": "1........9",

    "statusQueryGetUri": "http://localhost:7071/.../instances/....?...",
    "sendEventPostUri": "http://localhost:7071/..../instances/''''/raiseEvent/{eventName}?...",
    "terminatePostUri": "http://localhost:7071/..../instances/..../terminate?reason={text}&...",
    "rewindPostUri": "http://localhost:7071/......./instances/..../rewind?reason={text}&...",
    "purgeHistoryDeleteUri": "http://localhost:7071/..../stances/..?...",
    "restartPostUri": "http://localhost:7071/...../instances/1....../restart?...",
    "suspendPostUri": "http://localhost:7071/.....instances/1..../suspend?reason={text}&...",
    "resumePostUri": "http://localhost:7071/....../instances/../resume?reason={text}&..."

}
```

    - "id": " instance_id —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∑–∞–ø—É—â–µ–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó —ñ –≤—ñ–Ω –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è –≤ path –ø—ñ—Å–ª—è  /instances/...",
    - "statusQueryGetUri": "url  –∑–∞ —è–∫–∏–º –º–æ–∂–Ω–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è —ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —è–∫—â–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–≤–µ—Ä—à–∏–ª–æ—Å—è",
    -  "sendEventPostUri": "url –∫—É–¥–∏ –º–æ–∂–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—é –ø–æ–¥—ñ—é –ø–æ  http. –ü—Ä–∏ —Ü—å–æ–º—É –≤ URL {eventName} –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –Ω–∞–∑–≤—É –≤–∞—à–æ–≥–æ event /raiseEvent/{eventName}?taskHub= , –∞ instance_id —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤ —Ç—ñ–ª—ñ –∑–∞–ø–∏—Ç—É, —â–æ–± –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ —Å–∞–º–µ –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —ñ–Ω—Å—Ç–∞–Ω—Å–µ",
    - "terminatePostUri": "–ó–∞ —Ü–∏–º url  –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏–ø–∏–Ω–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è",
    - "rewindPostUri": " ??? –Ω–µ –ø–æ–º'—è—Ç–∞—é",
    - "purgeHistoryDeleteUri": "Url –æ—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å",
    - "restartPostUri": "Url –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∑–∞–≤–¥–∞–Ω–Ω—è",
    - "suspendPostUri": "Url  –ø—Ä–∏–∑—É–ø–∏–Ω–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è",
    - "resumePostUri": ""Url –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è"qD0%B0%D1%80%D1%96-azure) –¥–æ–∫–ª–∞–¥–Ω–æ –æ–ø–∏—Å–∞–Ω–æ –ø—Ä–æ—Ü–µ—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ —Ö–º–∞—Ä—ñ.

–í –¥–µ—è–∫—Ö url  —Ç—Ä–µ–±–∞ —Ö–∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä **reason={text}**, –¥–µ –∑–∞–º—ñ—Å—Ç—å {text}  –ø—Ä–æ–ø–∏—Å—É—î—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–∏–π —Ç–µ–∫—Å—Ç - –ø—Ä–∏—á–∏–Ω–∞ 

–ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É –Ω–∞ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ. –í –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ –∫–æ–¥–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ –±–ª–æ—Ü—ñ **Exception** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–∫–∏  –≤–∏–∫–ª–∏–∫–∞—î —Ç–∞–∫–µ –∂ **Activity**,  —è–∫ —ñ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ—ó –±—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∏. –ö–æ–¥ —Å–∞–º–æ–≥–æ Activity  –Ω–∞–≤–µ–¥–µ–Ω–æ –ø—ñ—Å–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –æ—Ä–∫–µ—Ç—Ä–∞—Ç–æ—Ä–∞.

```py
# Orchestrator
@app.orchestration_trigger(context_name="context")
def video_orchestrator(context):
    try:
        ....
        ....
    except Exception as e:
        logging.error( f"Orchestration failed with error: {e}")        
        error_r = yield context.call_activity("SendFailureNotification", str(e))
        error_r["error_type"] = type(e).__name__
    return [error_r]



# Activity
@app.activity_trigger(input_name="error")
def SendFailureNotification(error: str):
    """
        –§—É–Ω–∫—Ü—ñ—è  –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–∫–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    """
    resp_data = {
        "ok": False,
        "activity": "SendFailureNotification",
        "code": 404,
        "message": f"video_orchestrator completed with error = {error}"
       
    }
    return resp_data    

```

–¢–∞–∫–∞ –æ–±—Ä–æ–±–∫–∞ –≥–∞—Ä–∞–Ω—Ç—É—î —Ç–µ, —â–æ —É –≤–∏–ø–∞–¥–∫—É –ø–æ–º–∏–ª–∫–∏, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä  –∫–æ—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–≤–æ—é —Ä–æ–±–æ—Ç—É —ñ –∑–±–µ—Ä–µ–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–∞–≤—ñ—Ç—å –∑ –ø–æ–º–∏–ª–∫–æ—é. –í –ø—Ä–∏–∫–ª–∞–¥–Ω–∏—Ö Activity –ø—Ä–æ—Å—Ç–æ –ª–æ–≥—É—î–º–æ –ø–æ–º–∏–ª–∫—É —ñ –≤–∏–∫–∏–¥—É—î–º–æ **Exception** –Ω–∞ –≤–∏—â–∏–π —Ä—ñ–≤–µ–Ω—å (–Ω–∞ —Ä—ñ–≤–∞–µ–Ω—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞)


```py
# Activity
@app.activity_trigger(input_name="blobMessage")
def send_processing_request(  blobMessage: object):
    """–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤ —á–µ—Ä–≥—É –∑–∞–ø–∏—Ç –Ω–∞  –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—É"""
    q_srvc_connect = os.getenv("AzureWebJobsStorage","")
    q_name = "video-to-processing"
    json_message = json.dumps(blobMessage)
    logging.debug( f"–í—ñ–¥–ø—Ä–∞–≤–ª—è—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–µ—Ä–≥—É {q_name} –∑–∞–ø–∏—Ç –Ω–∞ –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ {json_message}" )
    try:
        request_queue_client = QueueClient.from_connection_string(
            conn_str = q_srvc_connect, 
            queue_name = q_name
        )

        msgsend_result=request_queue_client.send_message(
            json_message
        )
        
        logging.debug(f"‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–æ —á–µ—Ä–≥–∏ { q_name}.")
        logging.debug(f" ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: {msgsend_result.id}, –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥: {msgsend_result.pop_receipt}")

        resp_data = {
            "ok": True,
            "activity": "send_processing_request",
            "code": 200,
            "message": "Activity processed successfully",
            "data":  {"message_id":msgsend_result.id, "blobMessage": blobMessage}
        }
        return  resp_data        

    except Exception as e:
        logging.error(f"‚ùå –ü–æ–º–∏–ª–∫–∞  –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ —á–µ—Ä–≥–∏: {e}")
        raise       
    finally:
        request_queue_client .close()

```

–Ø –≤–∂–µ –ø–∏—Å–∞–≤ –ø—Ä–æ —Ç–µ, —â–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —É–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø–æ–¥—ñ—è–º–∏. –ê –ø–æ–∫–∏ –ø–æ–¥—ñ—è –Ω–µ –Ω–∞—Å—Ç–∞–ª–∞, —Ç–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä "—Å–ø–∏—Ç—å" –Ω–µ —Å–ø–æ–∂–∏–≤–∞—é—á–∏ –ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω–æ–≥–æ —á–∞—Å—É. –ù–∞–≤–µ–¥–µ–Ω–∏–π –Ω–∏–∂—á–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥—É –ø–æ–∫–∞–∑—É—î, —è–∫ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤ —Å—Ç–∞–Ω –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è

```py
        # –ó–∞–ø—É–∫—Å –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ
        result5 = yield context.call_activity("send_processing_request", blobMessage)
        
        # –≤–∏—Å—Ç–∞–≤–ª—è—î–º–æ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        due_time = context.current_utc_datetime + timedelta(seconds=360)
        # –∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç–∞–π–º–µ—Ä –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞
        durable_timeout_task = context.create_timer(due_time)
        # —Ä–µ—î—Å—Ç—Ä—É—î–º–æ –∑–æ–≤–Ω—ñ—à–Ω—é –ø–æ–¥—ñ—é, —â–æ –æ—á—ñ–∫—É—î —Ñ—É–Ω–∫—Ü—ñ—è, –ø—Ä–æ—Ç—è–≥–æ–º –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É
        eventName = "PROCESSING_VIDEO_COMPLITED"
        eventBody = context.wait_for_external_event(eventName)
        # –û—á—ñ–∫—É–≤–∞–Ω–Ω—è, —è–∫–∞ –∑ –ø–æ–¥—ñ–π –Ω–∞—Å—Ç–∞–Ω–µ —Ä–∞–Ω—à–µ: –ø—Ä–æ–π–¥–µ –∑–æ–≤–Ω—ñ—à–Ω—è, —á–∏ –∑–∞–∫—ñ–Ω—á–∏—Ç—å—Å—è —á–∞—Å–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª
        winning_task = yield context.task_any([eventBody, durable_timeout_task])
        result6 = None 
        if eventBody == winning_task:
            # —è–∫—â–æ –ø—Ä–∏–π—à–ª–∞ –∑–æ–≤–Ω—ñ—à–Ω—è –ø–æ–¥—ñ—è, —Ç–æ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ —É—Å–ø—ñ—à–Ω–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é –ø—Ä–æ –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª–∞
            durable_timeout_task.cancel()
            result6 = yield context.call_activity("SendVideoComplited", eventBody.result)
        else:
            # —è–∫—â–æ –∂ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—á–∞—Å–Ω–æ –Ω–µ –Ω–∞–¥—ñ–π—à–ª–∞, —Ç–æ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–æ–±–∫–∏ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–¥–Ω—é timeout 
            result6 = yield context.call_activity("Escalate", "ESCALATE DUE TO TIMEOUT")
```

–¢–µ–ø–µ—Ä —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ —è–∫ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—é –ø–æ–¥—ñ—é, —è–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Ç—Ä–∏–≥–µ—Ä–∏. –ù–∞ –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –Ω–∏–∂—á–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ –∫–æ–¥—É –ø–æ–∫–∞–∑–∞–Ω–æ —Ç—Ä–∏–≥–µ—Ä, —â–æ —Å–ª—É—Ö–∞—î —á–µ—Ä–≥—É Storage Queue –∑–∞ –Ω–∞–∑–≤–æ—é **"video-processed**. –Ø–∫ –º–æ–∂–Ω–∞ –ø–æ–º—ñ—Ç–∏—Ç–∏, **client.raise_event(....)** –ø—Ä–∏–π–º–∞—î –¥–æ—Å–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

- **instance_id** –≤–∫–∞–∑—É—î –Ω–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä  –∑–∞–ø—É—â–µ–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó. –í—ñ–Ω –ø–æ—è–≤–ª—è—î—Ç—å—Å—è –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —ñ –π–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤ —Ç–æ–π –æ–±—Ä–æ–±–Ω–∏–∫, —â–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è. –¢–æ–¥—ñ –æ–±—Ä–æ–±–Ω–∏–∫ –∑–º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ. –í –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ –≤  **Activity** —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è. –ê –≤ –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ –º–∏ –≤–∂–µ –≤–∏—á–∏—Ç—É—î–º–æ –π–æ–≥–æ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

- **event_name** –ü–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —Ç–æ–º—É, —â–æ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ

- **event_data** —Ü–µ –≤–∂–µ –ø—Ä–∏–∫–ª–∞–¥–Ω—ñ –¥–∞–Ω—ñ.

–©–µ —Ç—Ä–µ–±–∞ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É, —â–æ —Ç—Ä–∏–≥–µ—Ä –Ω–∞ Storage Queue –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É—î—Ç—å—Å—è (—Ç–æ–±—Ç–æ –≤—ñ–Ω —É–∂–µ —ñ—Å–Ω—É—î —ñ –ø—Ä–∞—Ü—é—î —è–∫–∞—Å—å factory). –¶–µ–π —Ç—Ä–∏–≥–µ—Ä –æ—á—ñ–∫—É—î, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ StorageQueue  –ø—É–±–ª—ñ–∫—É—î—Ç—å—Å—è —è–∫ base64 encoded. –í—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ, —Ü–µ–π —Ñ–æ—Ä–º–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –Ω–∞—Å–ª—ñ–¥—É–≤–∞—Ç–∏—Å—è —ñ –æ–±—Ä–æ–±–Ω–∏–∫–æ–º, —â–æ –ø—É–±–ª—ñ–∫—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–µ—Ä–≥—É. –í —ñ–Ω—à–æ–º—É —Ä–∞–∑—ñ –æ—Ç—Ä–∏–º–∞—î–º–æ –ø–æ–º–∏–ª–∫—É —á–∏—Ç–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —á–µ–≥–∏. 

```py

#----------------------------------------------------
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ñ–≤ Python V2
# ----------------------------------------------------

@app.queue_trigger(
    arg_name="msg",
    queue_name="video-processed",
    connection="AzureWebJobsStorage"
)
@app.durable_client_input(client_name="client")
async def client_function(msg: func.QueueMessage, client: df.DurableOrchestrationClient):
    #instance_id = "MyTargetOrchestratorInstance" 
    #event_name = "QueueMessageReceived"
    try:
        event_data_str = msg.get_body().decode("utf-8")
        event_data = json.loads(event_data_str)
        ## –≤–∏—á–∏—Ç—É—î–º–æ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —â–æ –æ–ø—É–±–ª—ñ–∫—É–≤–∞–≤ worker.
        instance_id = event_data["instance_id"]
        event_name = "PROCESSING_VIDEO_COMPLITED"
        logging.info(f"Received message: {event_data}")
        # -------------------------------------------------------------
        # –°–∞–º–µ —Ñ—É–Ω–∫—Ü—ñ—è  –ø–æ—Å–ª–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π event
        await client.raise_event(instance_id, event_name, event_data)
        # ---------------------------------------------------------------
        logging.info(f"Successfully raised external event '{event_name}' for instance '{instance_id}'.")

        return None
    except Exception as e:
        logging.error(f"‚ùå –ü–æ–º–∏–ª–∫–∞  –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —á–µ—Ä–≥–∏ video-processed: {e}")
        raise     


```

–ö—Ä—ñ–º –ø–æ–∫–∞–∑–∞–Ω–æ–≥–æ —Ç—Ä–∏–≥–µ—Ä–∞ –¥–ª—è Storage Queue  –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ Durable Functions  –º–∞—é—Ç—å –≤–±—É–¥–æ–≤–∞–Ω–∏–π http —Å–ª—É—Ö–∞—á –ø–æ–¥—ñ–π. –ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î URL  —Ü—å–æ–≥–æ —Å–ª—É—Ö–∞—á–∞, –¥–µ event Name  —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤ –µ–ª–µ–º–µ–Ω—Ç—ñ URL, –∞ –≤ —Ç—ñ–ª—ñ –ø–µ—Ä–µ–¥–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–Ω—ñ –¥–∞–Ω—ñ.

**–Ü –Ω–∞ –æ—Å—Ç–∞–Ω–æ–∫, —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Å–ª—ñ–≤ –ø—Ä–æ –≤—ñ–¥–ª–∞–¥–∫—É —ñ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.**

Durable —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ—Å–∏—Ç—å –≤–∞–∂–∫–æ –≤—ñ–¥–ª–∞–≥–æ–¥–∂—É–≤–∞—Ç–∏ —ñ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏—Ö —ñ–Ω—Å—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è. –ü–æ –ø–µ—Ä—à–µ  –≤–æ–Ω–∏ state full —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ, —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è—ñ –≤—ñ–¥–ª–∞–¥–∫–∏ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Ç–µ–∂ state full.  –ü–æ –¥—Ä—É–≥–µ - –∫–æ–∂–Ω–∏–π –∑–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–∞—î –Ω–∞–±—ñ—Ä —Å–≤–æ—ó—Ö —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö URL —ñ –¥–æ–∞–¥—Ç–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö, —è–∫—ñ –ø–æ—Ç—ñ–º –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —á–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤. –ù—É —ñ –≤–æ–Ω–∏ —ñ–Ω—Ç–µ–≥—Ä—É—é—Ç—å—Å—è –∑ —Ä—ñ–∑–Ω–∏–º–∏ midleware —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, —â–æ –≤–∏–º–∞–≥–∞—é—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —ó—Ö–Ω—ñ—ó API. –ù—É —ñ durable function —É–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –ø–æ–¥—ñ—è–º–∏, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≥–µ–Ω–µ—Ä—É–≤–∞ —á–∏ –º–æ–¥–µ–ª—é–≤–∞—Ç–∏ —á–∏ –µ–º—É–ª—é–≤–∞—Ç–∏ —ñ, —á–∞—Å—Ç–æ, —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ.

–¢–æ–º—É –¥–ª—è –≤—ñ–¥–ª–∞–¥–∫–∏ —ñ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ Jupyter notebook  —ñ –∑–∞–ª–∏—à–∏–≤—Å—è –¥—É–∂–µ –Ω–µ—é –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π.
–î–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ  –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —è –æ–ø–∏—Å–∞–≤ –∑–∞ –ª—ñ–Ω–∫–æ–º: [–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞](https://github.com/pavlo-shcherbukha/sh-py-ml-orchestrator-p/tree/master#%D1%82%D0%B5%D1%81%D1%82%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F-%D0%BE%D1%80%D0%BA%D0%B5%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%B0). 
–°–∞–º—É Notebook –º–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –∑–∞ –ª—ñ–Ω–∫–æ–º [durable-func-test.ipynb](https://github.com/pavlo-shcherbukha/sh-py-ml-orchestrator-p/blob/master/tests/notebooks/durable-func-test.ipynb), 
—Ç–∞ helper  –¥–æ –Ω–µ—ó: [test_utils.py](https://github.com/pavlo-shcherbukha/sh-py-ml-orchestrator-p/blob/master/tests/test_utils.py)


### <a name="p-3.3">3.3. Heavy Lifting (–û–±—Ä–æ–±–∫–∞): AI –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö</a>

    –î–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö —è –≤–∏–±—Ä–∞–≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –≤ Azure: **Azure Container Instance**
    –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Azure Container Instances, –æ–±—É–º–æ–≤–ª–µ–Ω–∏–π –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é  –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ –∑ "–≤–∞–∂–∫–æ—é" –º–æ–¥–µ–ª–ª—é (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, YOLOv8) –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤. 
    **Azure Container Instance** - —Ü–µ –ª–µ–≥–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, —â–æ –Ω–µ –≤–∏–º–∞–≥–∞—î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è "–≤–∞–∂–∫–æ–≥–æ" K8s. –ú–æ–∂–ª–∏–≤–æ, –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º —Ç–∞–º —Ç–µ–∂ —î —è–∫–∏–π—Å—å k8-micro —á–∏ k3s. –ê–ª–µ —Å—É—Ç—å –≤ —Ç–æ–º—É, —â–æ –º–æ–∂–Ω–∞ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤, –Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞—é—á–∏  –≤–∞–∂–∫–æ—ó –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–µ–Ω—Ä–∞–º–∏. 

    –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –≤—ñ–¥–µ–æ, –∞–Ω–∞–ª—ñ–∑—É—î –π–æ–≥–æ (—Ö—Ç–æ –≤ –∫–∞–¥—Ä—ñ: –ª—é–¥–∏–Ω–∞, –º–∞—à–∏–Ω–∞ ,  —Å–æ–±–∞–∫–∞  –∞–±–æ –∫—ñ—Ç ) —ñ –∑–∞–ø–∏—Å—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç  —É  —Å—Ö–æ–≤–∏—â–µ ( –≤—Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  azure blob storage ). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä  azure blob storage —Ü–µ —Å—É—Ç–Ω—ñ—Å—Ç—å, —â–æ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∞ —Ä–æ–∑–¥—ñ–ª—É –¥–∏—Å–∫–∞, –∞ –Ω–µ –≤ –∑–Ω–∞—á–µ–Ω–Ω—ñ docker-container. –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ–¥–∞—Ç–∫—É –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ –∑–∞ –ª—ñ–Ω–∫–æ–º [sh-py-ml-worker-p](https://github.com/pavlo-shcherbukha/sh-py-ml-worker-p/tree/master)

    –ó–≤–∏—á–∞–π–Ω–æ, –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ  –Ω–∞–ø–∏—Å–∞—Ç–∏ Dockerfile  —ñ –∑—ñ–±—Ä–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –æ–±—Ä–∞–∑. –í —è–∫–æ—Å—Ç—ñ –±–∞–∑–æ–≤–æ–≥–æ docker-container –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –º–∞–ª–µ–Ω—å–∫–∏–π **python:3.11-slim**. –û–¥–Ω–æ—é –∑ –ø—Ä–æ–±–ª–µ–º, —è–∫—É –ø—Ä–∏–π—à–ª–æ—Å—è –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ –≤–∏—è–≤–∏–ª–∞—Å—è –∑–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π. –¢–∞–∫, –æ–∫—Ä–µ–º—ñ –≤–µ—Ä—Å—ñ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫ Ultralitics  –ø—Ä–∞—Ü—é—é—Ç—å –∑ —á—ñ—Ç–∫–æ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫ torch. –î–æ—Ç–æ–≥–æ –∂ —Ç–∞–∫ —è–∫ –¥–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ, –ø–æ—Ä—ñ–±–Ω–æ —Å—Ç–∞–≤–∏—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ torch, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ç—ñ–ª—å–∫–∏ CPU  —ñ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤—ñ–¥–µ–æ–∫–∞—Ä—Ç–∏. –ê –≤–æ–Ω–∏ —Å—Ç–∞–≤–ª—è—Ç—å—Å—è –Ω–µ –∑ –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é Pypi –∞ –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ pytorch.org —ñ, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ, —ó—Ö –Ω–µ –º–æ–∂–Ω–∞ –≤–ø–∏—Å–∞—Ç–∏ –≤ —Ñ–∞–π–ª requremets.txt,  –∞ —Ç—Ä–µ–±–∞ —Å—Ç–∞–≤–∏—Ç–∏ –æ–∫—Ä–µ–º–æ. –Ü, –Ω–∞—Ä–µ—à—Ç—ñ, —Å—Ç–∞–≤–∏—Ç—å—Å—è –≤–æ–Ω–æ —Ö–≤–∏–ª–∏–Ω 20-30, —â–æ –ø—Ä–∏ —Ä–æ–∑—Ä–æ–±—Ü—ñ —Ç–∞ –≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—ñ –ø—Ä–æ—Å—Ç–æ –Ω–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ. –¢–æ–º—É –∑–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—ñ–≤ –±—É–ª–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∞ –Ω–∞ 2 –µ—Ç–∞–ø–∏.
    
    - –ù–∞ –ø–µ—Ä—à–æ–º—É –µ—Ç–∞–ø—ñ –∑–±–∏—Ä–∞—î—Ç—å—Å—è –±–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑ –∑ —É—Å—ñ–º–∞ "–≤–∞–∂–∫–∏–º–∏" –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞–º, —è–∫ –∑–≥–∞–¥—É–≤–∞–≤ —Ä–∞–Ω—ñ—à–µ, —Ö–≤–∏–ª–∏–Ω 20-30. –ó–∞ —Ü–µ –≤—ñ–¥–ø–æ–≤—ñ–∞—î —Ñ–∞–π–ª: [Dockerfile.base.dockerfile](https://github.com/pavlo-shcherbukha/sh-py-ml-worker-p/blob/master/Dockerfile.base.dockerfile).
    
    - –ù–∞ –¥—Ä—É–≥–æ–º—É –µ—Ç–∞–ø—ñ —Å—Ç–≤–æ—Ä—é—î–º–æ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –æ–±—Ä–∞–∑ –¥–æ–¥–∞—Ç–∫—É, —è–∫–∏–π –ø—Ä–∞–∫—Ç–∏—á–Ω–æ –±–µ—Ä–µ –±–∞–∑–æ–≤–∏–π —ñ –∫–æ–ø—ñ—é—î –Ω–∞ –Ω—å–æ–≥–æ —Ç—ñ–ª—å–∫–∏ —Ñ–∞–π–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∫–æ–¥—É: [Dockerfile](https://github.com/pavlo-shcherbukha/sh-py-ml-worker-p/blob/master/Dockerfile).

    –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏, –≤—ñ–¥–ª–∞–¥–∫–∏ —Ç–∞ —Ç—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –µ–º—É–ª—è—Ç–æ—Ä storage Azurite. –¢–∞–º —î –≤—Å—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –º–µ–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ: BlobStorage  —Ç–∞  Storage Queue. –î–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –∑ Azurite  –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω—É –≤–µ—Ä—Å—ñ—é Azurite  –Ω—É —ñ –æ–±'—î–¥–Ω–∞–≤ —Ü—ñ –¥–≤–∞  –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –≤ **Docekr Compse**: [docker-compose.yml](https://github.com/pavlo-shcherbukha/sh-py-ml-worker-p/blob/master/docker-compose.yml).  –î–ª—è Azurite –∑—Ä–∞–∑—É –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –ø–æ—Ä—Ç–∏ –¥–ª—è Blob —Ç–∞ –¥–ª—è Queue. –ù–∞ —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É.  

    ```yaml
    # 2. –°–µ—Ä–≤—ñ—Å –¥–ª—è Azurite
    azurite:
        image: mcr.microsoft.com/azure-storage/azurite
        container_name: azurite-container
        ports:
        # –í–∏—Å—Ç–∞–≤–ª—è—î–º–æ –ø–æ—Ä—Ç–∏, —â–æ–± Azurite –±—É–≤ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ –≤–∞—à–æ—ó Windows-–º–∞—à–∏–Ω–∏
        - "10000:10000" # Blob
        - "10001:10001" # Queue
        
        # –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö Azurite –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—ñ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
        volumes:
        - azurite_data:/data
        
        networks:
        - azure-net

    # –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ—ó –º–µ—Ä–µ–∂—ñ —Ç–∞ —Ç–æ–º—ñ–≤

    ```

–ü—Ä–æ–≥—Ä–∞–º–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –º–∞—î —Ç–∞–∫—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- –î–æ–¥–∞—Ç–æ–∫ –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–∏ Azure  –∑—ñ BlobStorage —Ç–∞ –∑—ñ Storage Queue. –¢–æ–±—Ç–æ, —á–∏—Ç–∞—î –∑ storage —ñ –∑–∞–ø–∏—Å—É—î –Ω–∞ storage —Ç–∞ —á–∏—Ç–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —á–µ—Ä–≥–∏ —ñ –ø—É–±–ª—ñ–∫—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–µ—Ä–≥—É.
- –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É –Ω–∞ —Ç–µ, —â–æ –≤ linux –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –æ–±—Ä–æ–±–ª—è—Ç–∏ —Ñ–∞–π–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ (—Ç–æ–±—Ç–æ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –≤ –Ω–∏—Ö —â–æ—Å—å) –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤ temporary –∫–∞—Ç–∞–ª–æ–∑—ñ, —â–æ–± –Ω–µ –Ω–∞–¥–∞–≤–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö –ø—Ä–∞–≤ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥–∏ –¥–æ–¥–∞—Ç–∫—É. –û—Ç—Ä–º–∞–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ temp dir –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Ü—å–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ.

    ```py

    import tempfile
    temp_dir = tempfile.gettempdir()
    cv2.imwrite(f"{temp_dir}/{local_screenshot_name}", frame)

    ```
–©–µ –æ–¥–Ω–æ—é –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—é —î —Ç–µ, –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ –∫–∞–¥—Ä—ñ–≤ –∑ –¥–µ—Ç–µ–∫—Ç–æ–≤–∞–Ω–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–∞–π–ª –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –Ω–∞ BlobStorage, –≤ –¥–æ –Ω—å–æ–≥–æ –¥–æ–¥–∞—î—Ç—å—Å—è —â–µ —Ä—è–¥ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –º–µ—Ç–∞–¥–∞–Ω–∏—Ö:

    ```py

                # –õ–æ–≥—ñ–∫–∞ –¥–ª—è —Ç–≤–∞—Ä–∏–Ω
                            logger.debug(f"DOG OR CAT DETECTED")
                            timestamp = datetime.now().strftime("%Y%m%d-%H%M%S")
                            local_screenshot_name = f"{fblob}_detect_dogcat_{frame_number}_{timestamp}.jpg"
                            # –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —ñ–º–µ–Ω—ñ –±–ª–æ–±—É –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º –∫–∞—Ç–∞–ª–æ–≥—É
                            screenshot_name = f"{fblob}/detect_dogcat_{frame_number}_{timestamp}.jpg"

                            # 1. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö —É –≤–∏–≥–ª—è–¥—ñ —Å–ª–æ–≤–Ω–∏–∫–∞
                            video_name_prefix = os.path.splitext(fblob)[0]
                            custom_metadata = {
                                "video_source": fblob,      
                                "detection_class": class_name,
                                "detection_confidence": f"{confidence:.2f}",
                                "frame_number": str(frame_number),     
                                "processing_time_utc": datetime.utcnow().isoformat()
                            }

                            logger.debug(f"metadata for blob " + json.dumps( custom_metadata ))

                            cv2.imwrite(f"{temp_dir}/{local_screenshot_name}", frame)
                            
                            #–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∫—Ä—ñ–Ω—à–æ—Ç—É –≤ Blob Storage
                            screenshot_blob_client = container_client.get_blob_client(screenshot_name)
                            logger.debug(f"Uploading screenshot to blob: {temp_dir}/{local_screenshot_name} to {screenshot_name} ")
                            with open(f"{temp_dir}/{local_screenshot_name}", "rb") as data:
                                screenshot_blob_client.upload_blob(data, metadata=custom_metadata, overwrite=True)
                                logging.info(f"–°–∫—Ä—ñ–Ω—à–æ—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: {local_screenshot_name} –≤ {screenshot_name}")
                            logger.debug(f"Remove processed screenshot: {temp_dir}/{local_screenshot_name}")
                            os.remove(f"{temp_dir}/{local_screenshot_name}")

    ```
 –ù–∞ Blob Storage  –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ –ø–∞–ø–∫–∏. –Ü —Ç–æ–¥—ñ —Ñ–∞–π–ª–∏ –±—É–¥—É—Ç—å –≥—Ä—É–ø—É–≤–∞—Ç–∏—Å—è –∑–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–º–∏ –ø–∞–∫–∞–º–∏. –û—Å—å –ø—Ä–∏–∫–ª–∞–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ –±–ª–æ–±–∞ –∑ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—é –ø–∞–ø–∫–æ—é:

    ```py
        # –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —ñ–º–µ–Ω—ñ –±–ª–æ–±—É –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º –∫–∞—Ç–∞–ª–æ–≥—É {fblob}
        screenshot_name = f"{fblob}/detect_car_{frame_number}_{timestamp}.jpg"

    ```

–ó –ø—Ä–∏–≤–æ–¥—É YOLO8 –º–æ–¥–µ–ª—ñ. –Ø –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É **"yolov8n.pt"**. –©–æ–± –º–æ–¥–µ–ª—å –Ω–µ —Å–∫–∞—á—É–≤–∞–ª–∞—Å—å –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É, —â–æ –Ω–∞ —Å–ø—Ä–∞–≤–¥—ñ —Ç–µ–∂ –¥—É–∂–µ –¥–æ–≤–≥–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, —è —ó—ó –æ–¥–∏–Ω —Ä–∞–∑ —Å–∫–∞—á–∞ —ñ –ø–æ–∫–ª–∞–≤ —É –±–∞–∑–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –ø–æ–∫–∞–∑–∞–Ω–æ–≥–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Ultralitic  –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–æ–≥–æ (—ñ –Ω–∞–π–¥–æ–≤—à–æ–≥–æ) —Å–ø–æ—Å–æ–±—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ —è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é —Ç–∞–∫–∏–π:

```py
from ultralytics import YOLO 
MODEL_PATH = "yolov8n.pt"
if os.path.exists(MODEL_PATH):
    yolo_model = YOLO(MODEL_PATH)
    logger.debug("–ú–æ–¥–µ–ª—å —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª—É.")
else:
    logger.debug(f"–ü–æ–º–∏–ª–∫–∞: –§–∞–π–ª –º–æ–¥–µ–ª—ñ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ —à–ª—è—Ö–æ–º {MODEL_PATH}")
logger.debug(f"YOLO model ready: {yolo_model.info()}")
```
–¢—É—Ç —Ç–µ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∫–∞–∑–∞—Ç–∏, —â–æ —è —Ç–µ–∂ —Å—Ä–æ–±–∏–≤ —Ç–∞–∫—É –∂ –ø–æ–º–∏–ª–∫—É —è–∫ —ñ –≤ durable function: –Ø –ø–¥–∫–ª—é—á–∞—é—Å—è —Ç–æ storage —á–µ—Ä–µ–∑ connect string  –∞ –Ω–µ —á–µ—Ä–µ–∑ meneged identity. 
–î–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ —Ü–µ —â–µ –ø—Ä–∏–π–Ω—è—Ç–Ω–æ. –ê –æ—Ç –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–∞ —Ç–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –Ω–µ –ø—Ä–∏–π–Ω—è—Ç–Ω–∏–π.

–Ø —Ç—É—Ç –Ω–µ –±—É–¥—É–≤–∞–≤ –Ω—ñ—è–∫–æ–≥–æ devops  –ø—Ä–æ—Ü–µ—Å–∞. –ú–µ–Ω–µ —Ü—ñ–∫–∞–≤–∏–ª–∞ —á–∞—Å—Ç–∏–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è  –∞ –Ω–µ  –ø—Ä–æ—Ü–µ—Å devops.  –¢–æ–º—É –ø—ñ–¥–∫–ª—é—á–∏–≤  Azure container registry —ñ –≥–æ—Ç–æ–≤–∏–π –æ–±—Ä–∞–∑ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–≤ –Ω–∞ –Ω—å–æ–≥–æ. –ê –≤–∂–µ –∑ zure container registry  —Å—Ç–≤–æ—Ä—é–≤–∞–≤—Å –¥–∫–æ–Ω—Ç–∞–π–Ω–µ—Ä –≤ Azure Container Instance —ñ —Å—Ç–∞—Ä—Ç—É–≤–∞–≤ –¥–æ–¥–∞—Ç–æ–∫. –î–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞–ø–∏—Å–∞–Ω–æ –∑–∞ –ª—ñ–Ω–∫–æ–º [–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É –≤ azure](https://github.com/pavlo-shcherbukha/sh-py-ml-worker-p/tree/master#%D1%80%D0%BE%D0%B7%D0%B3%D0%BE%D1%80%D1%82%D0%B0%D0%BD%D0%BD%D1%8F-%D0%B4%D0%BE%D0%B4%D0%B0%D1%82%D0%BA%D1%83-%D0%B2-azure). 

### <a name="p-3.4">3.4. Feedback Loop: –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</a>

    –í —Ç–∞–∫–∏—Ö —Ä–æ–∑—Ä–æ–¥—ñ–ª–µ–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–∏–º —î —Ä–æ–∑—Ä–æ–±–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏  –æ–±–º—ñ–Ω—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ —á—ñ—Ç–∫–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —à–ª—è—Ö—ñ–≤ –æ–±–º—ñ–Ω—É –ø–æ–≤—ñ–¥–º–æ–ª–µ–Ω–Ω—è–º–∏. –î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É, —Ç–∞–∫ —è–∫ —É –º–µ–Ω–µ –ø—Ä–æ–µ–∫—Ç "–ì–æ–ø–∞—Ö –Ω–∞ –≥—Ä–∞–±–ª—è—Ö" —ñ —è —á–∞—Å—Ç–æ –∑–º—ñ–Ω–≤–∞–≤ —ñ–¥–µ—ó —Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ -—Ç–æ —ñ –Ω–µ –º—ñ–≥ —Ñ–æ—Ä–º–∞–ª—ñ–∑—É–≤–∞—Ç–∏  —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –∫–∞–Ω–∞–ª–∏ –æ–±–º—ñ–Ω—É –Ω–∏–º–∏. –¢–∞–∫, –º–æ–∂–Ω–∞ –ø–æ–º—ñ—Ç–∏—Ç–∏, —â–æ –≤ —Ä–æ–∑–¥—ñ–ª—ñ durable function –æ–±–º—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ –º–æ–∂–ª–∏–≤–∏–π —è–∫ —á–µ—Ä–µ–∑ —á–µ—Ä–≥–∏ —Ç–∞ —ñ –ø–æ http. –ê –æ—Ç —É –æ–±—Ä–æ–±–Ω–∏–∫–∞ –≤—ñ–¥–µ–æ–≤–∞–π–ª—ñ–≤  –æ–±–º—ñ–Ω –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–æ —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ —á–µ—Ä–≥–∏. –¶–µ —Å–∞–º–µ
    —Ç–æ–º—É, —â–æ  —Ü–µ–π –ø—Ä–æ–µ–∫—Ç —Ä–æ–∑–≤–∏–≤–∞—î—Ç—å—Å—è "–∫—É–¥–∏ –≤—ñ—Ç–µ—Ä –ø–æ–¥–º–µ". –¢–æ–º—É –Ω–∞–≤–µ–¥—É –≤ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

#### –ó–∞–ø—É—Å–∫ –æ—Ä–∫–µ—Å—Ç–∞—Ä–∞—Ç–æ—Ä–∞

–¶–µ –ø–æ–≤—ñ–¥–º–æ–ª–µ–Ω–Ω—è —â–æ —Å—Ç–∞—Ä—Ç—É—î  –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª–∞ —É —Ö–º–∞—Ä—ñ. –ü—Ä–∏—Ö–æ–¥–∏—Ç—å –ø–æ http. –ú–∞—î —Ç–∞–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É

```json
{ 
"blobURL": "http://127.0.0.1:10000/devstoreaccount1/dacha-video/20250819-110439.avi",
"blobName": "dacha-video/20250819-111832.avi"
}
```

#### –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ–±—Ä–æ–Ω–∏–∫—É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—ñ–≤ –Ω–∞ –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ
–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—É–±–ª—ñ–∫—É—é –≤ —á–µ—Ä–≥—É –æ–±—Ä–æ–±–Ω–∏–∫—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—è –æ–±—Ä–æ–±–∫–Ω–∏–∫—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤—ñ–¥–µ–æ—Ñ–∞–π–ª–∞ **20250819-110439.avi** , —Ç—É—Ç —î –æ–±'—î–∫—Ç person –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó

```json
{
    "blobUrl": "http://127.0.0.1:10000/devstoreaccount1/dacha-video/20250819-110439.avi",
    "blobName": "dacha-video/20250819-110439.avi",
    "posted": "2025-06-01T22:03:02",
    "instance_id": "800081000120002"
}

```  

####  –í—ñ–¥–ø–æ–≤—ñ–¥—å –æ–±—Ä–æ–±–Ω–∏–∫–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ü—ñ—Å–ª—è –æ–±—Ä–æ–±–∫–∏ –æ–±—Ä–æ–±–Ω–∏–∫ –ø—É–±–ª—ñ–∫—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–µ—Ä–≥—É –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—Ä–æ–±–∫–∏ 

```json
{
        "instance_id": "800081000120002",
        "blobUrl": "http://127.0.0.1:10000/devstoreaccount1/dacha-video/20250819-110439.avi", 
        "blobName": "dacha-video/20250819-110439.avi", 
        "status": "PROCESSED", 
        "start_timestamp": "2025-12-14T18:00:30.761319", 
        "stop_timestamp": "2025-12-14T18:00:37.427266", 
        "details": {}
}

```
—ñ –≤–æ–Ω–æ –≤–∂–µ –∑—É–ø–∏–Ω—è—î —Ä–æ–±–æ—Ç—É –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

#### –†–µ–∑—É–ª—å—Ç–∞—Ç, —â–æ –∑–±—É—Ä—ñ–≥–∞—î –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ –æ–±—Ä–æ–±–∫—É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—É

–Ü –≤–∂–µ, –∫–æ–ª–∏ –∞–ø—Ä–æ—Å–∏—Ç–∏ –æ—Ä–∫–µ—Å—Ä–∞—Ç–æ—Ä –≤—ñ–Ω –ø–æ–≤–µ—Ä–Ω–µ —Ç–∞–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –≤–∏–ø–∞–¥–∫—É —É—Å–ø—ñ—à–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É:

```json
[
  {
    "ok": true,
    "activity": "send_processing_request",
    "code": 200,
    "message": "Activity processed successfully",
    "data": {
      "message_id": "b71c1dec-97c2-40eb-9d30-cf0ff1e9703a",
      "blobMessage": {
        "blobUrl": "https://strgdacha.blob.core.windows.net/dacha-video/20250819-111832.avi",
        "blobName": "dacha-video/20250819-111832.avi",
        "posted": "2025-12-27T14:54:53.281962",
        "instance_id": "62e92b342c314a2b8b69caa7be7c618d"
      }
    }
  },
  {
    "ok": true,
    "activity": "SendVideoComplited",
    "code": 200,
    "message": "Activity processed successfully",
    "data": "{\"instance_id\": \"62e92b342c314a2b8b69caa7be7c618d\", \"blobURL\": \"https://strgdacha.blob.core.windows.net/dacha-video/20250819-111832.avi\", \"blobName\": \"dacha-video/20250819-111832.avi\", \"status\": \"PROCESSED\", \"start_timestamp\": \"2025-12-27T14:54:57.447686\", \"stop_timestamp\": \"2025-12-27T14:55:50.384240\", \"details\": {}}"
  }
]

```

#### –ú–µ—Ç–∞–¥–∞–Ω—ñ, —â–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –±—ñ–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ–≤–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É

–ê –Ω–∞ –¥–µ—Ç–µ–∫—Ç–æ–≤–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è—Ö –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏ —Ç–∞–∫–∏–π —Å–ø–∏—Å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö, —â–æ –ø–æ—è—Å–Ω—é—é—Ç—å, —â–æ —Å–∞–º–µ –¥–µ—Ç–µ–∫—Ç–æ–≤–∞–Ω–æ:


<kbd><img src="../assets/img/posts/2025-12-16-az-datapipeline/doc/pic-02.png" /></kbd>
<p style="text-align: center;"><a name="pic-02">pic-02</a></p>


## <a name="p-4">4. –û—Ü—ñ–Ω–∫–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω–Ω—è</a>

    - Raspberry Pi: –†–∞–∑–æ–≤–∞ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è. —è–∫—â–æ –ø–æ—à—É–∫–∞—Ç–∏ –¥–æ –≥–æ—Ç–æ–≤–∏–π –Ω–∞–±—Ä—ñ, —â–æ –≤–∫–ª—é—á–∞—î —Å–∞–º—É –ø–ª–∞—Ç—É, –∫–æ—Ä–ø—É—Å, –±–ª–æ–∫ –∂–∏–≤–ª–µ–Ω–Ω—è, sd-–∫–∞—Ä—Ç—É  –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –∑–∞ 6000  –≥—Ä–Ω.
    - –ö–∞–º–µ—Ä–∞ - –≤—Å–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –º–æ–¥–µ–ª—ñ - –Ω—É –Ω–µ—Ö–∞–π –≤ —Ä–∞–π–Ω—ñ 800-1500 –≥—Ä–Ω.
    - Azure Blob/Functions: –ú–∞–π–∂–µ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –Ω–∞ –º–∞–ª–∏—Ö –æ–±'—î–º–∞—Ö.
    - Azure Container Instances: –û–ø–ª–∞—Ç–∞ –ª–∏—à–µ –∑–∞ —Å–µ–∫—É–Ω–¥–∏ —Ä–æ–±–æ—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 2-3 —Ü–µ–Ω—Ç–∏ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª—ñ–∑—É).
    - Azure Container Registry [pricing](https://azure.microsoft.com/en-us/pricing/details/container-registry/).

–û—Å—å —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä—Å—Ç–∞–Ω–Ω—è —Ü—ñ—î—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –∑–∞ –≥—Ä—É–¥–Ω—å –º—ñ—Å—è—Ü—å

<kbd><img src="../assets/img/posts/2025-12-16-az-datapipeline/doc/pic-03.png" /></kbd>
<p style="text-align: center;"><a name="pic-03">pic-03</a></p>

<kbd><img src="../assets/img/posts/2025-12-16-az-datapipeline/doc/pic-04.png" /></kbd>
<p style="text-align: center;"><a name="pic-04">pic-04</a></p>



## <a name="p-5">5. –ü—ñ–¥—Å—É–º–∫–æ–≤—ñ  –¥—É–º–∫–∏</a>

- –ß–∏ —î —Ü–µ —ñ–¥–µ–ª—å–∞–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω—è?
–ù—ñ, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—Ä—É–∞ –Ω–µ —î —ñ–¥–µ–∞–ª—å–Ω–æ—é. –ù–µ –∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —Ç–µ, —â–æ —è —É–≤–∞–∂–Ω–æ, —ñ –Ω–µ —Ä–∞–∑, –ø—Ä–æ—á–∏—Ç–∞–≤ –Ω–∞–≤—á–∞–¥—å–Ω–∏–π –∫—É—Ä—Å az-204,  –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑–Ω–∞–Ω–Ω—è –Ω–µ –¥–∞–ª–∏ –º–µ–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ "–æ—Ç —Ç–∞–∫ –≤–∑—è—Ç–∏ —ñ —Ä–æ–∑—Ä–æ–±–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É —á–∏ —ñ–¥–µ–∞–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –¥–æ–¥–∞—Ç–∫—É" –∞ –ø–æ—Ç—ñ–º —ó—ó —â–µ "–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø—Ä–æ–≥—Ä–∞–º—É–≤–∞—Ç–∏".

- –Ø–∫—ñ —è –∑—Ä–æ–±–∏–≤ –ø–æ–º–∏–ª–∫–∏?

1. –ü–µ—Ä—à–∞ —ñ –¥–æ—Å–∏—Ç—å –≤–∞–≥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞ —Ü–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –Ω–∞ Durable Function  –ø–æ–∫–ª–∞—Å—Ç–∏ –≤–µ–ª–∫–µ –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –ó–≤–∏—á–∞–π–Ω–æ, –≤–æ–Ω–∞ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —è–∫–µ—Å—å –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –ê–ª–µ —è–∫ —Ç—ñ–ª—å–∫–∏ —Ç–∞–º –∑'—è–≤–ª—è—é—Ç—å—Å—è —è–∫—ñ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ - –∑–∞–ª–µ–∂–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —á–∏ —è–∫—ñ—Å—Ç—å –≤–∏–º–æ–≥–∏ –¥–æ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏  - —Ç–æ –∑ –≤–µ–ª–∏–∫–æ –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—é —É –≤–∞—Å –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–∏–π–∂–µ. Durable Function  –ø–æ–≤–∏–Ω–Ω–∞ —É–ø—Ä–∞–≤–ª—è—Ç–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è–º–∏ –∞ –Ω–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —ó—Ö. –•–æ—á–∞ –≤ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –Ω–∞ Durable Function –ø–æ–∫–ª–∞–¥–µ–Ω—ñ  –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –¢–æ–º—É —è —ñ –∑—Ä–æ–±–∏–≤ –ø–æ–º–∏–ª–∫—É.

2. –û–±—Ä–æ–±–Ω–∏–∫ –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—ñ —è  –∑—Ä–æ–±–∏–≤ –Ω–∞ [Azure Container Instance](https://learn.microsoft.com/en-us/azure/container-instances/container-instances-overview).

–•–æ—á–∞ –Ω–∞ —Å–ø—Ä–∞–≤–¥—ñ, –µ–∫–æ–Ω–æ–º—ñ—á–Ω—ñ—à–µ –± –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ [Azure Container Apps](https://learn.microsoft.com/en-us/azure/container-apps/overview) —Ç–æ–º—É —â–æ –≤ –Ω—å–æ–º—É —î —à–∞–±–ª–æ–Ω "Hosting background processing jobs": [Jobs in Azure Container Apps](https://learn.microsoft.com/en-us/azure/container-apps/jobs?tabs=azure-cli).

–°–ø—Ä–∞–≤–∞ –≤ —Ç–æ–º—É, —â–æ Azure Container Instance –≤–µ—Å—å —á–∞—Å –≤–∏–∫–æ–Ω—É—î –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–≥–∏, —è–∫—É —Å–ª—É—Ö–∞—î - –∞ —Ü–µ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω–æ–≥–æ —á–∞—Å—É. –Ø–∫ –≤–∞—Ä—ñ–∞–Ω—Ç–æ–º –≤–∏—Ö–æ–¥—É –∑ —Å–∏—Ç—Ü–∞—Ü—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–µ  —á–µ—Ä–≥—É, –∞ http  –∑–∞–ø–∏—Ç —Ö–æ—á–∞ –± –Ω–∞ –µ—Ç–ø—ñ –∑–∞–ø—É—Å–∫—É –æ–±—Ä–æ–±–Ω–∏–∫–∞.

3. –Ø  –∑–≤'—è–∑–∞–≤ —Ä–µ—Å—É—Ä—Å–∏ –∑—ñ —Å—Ç–æ—Ä–∞–¥–∂–µ–º —á–µ—Ä–µ–∑ connect string,  —â–æ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤—É –∑–æ–≤—Å—ñ–º –Ω–µ –±–∞–∂–∞–Ω–æ —ñ —Ç—Ä–µ–±–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Managed identity

4. –Ø –Ω–µ  –∑—Ä–æ–±–∏–≤ —Ç—Ä–∏–≥–µ—Ä –∑ Blobstorage  –Ω–∞ Durable Function (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä) —á–µ—Ä–µ–∑ EventGreed.

5. –Ø –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ–±–º—ñ–Ω—É –º—ñ–∂ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —ñ –æ–±—Ä–æ–±–Ω–∏–∫–æ–º –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—ñ–≤ –∑–∞–≥—É–±–∏–≤ instance_id ‚Äî –®—É–∫–∞–≤ —è –π–æ–≥–æ –º–∞–±—É—Ç—å 2 –¥–Ω—ñ. –ê —è–∫–±–∏ —É –º–µ–Ω–µ —Ü—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–ª–∏ –æ–ø–∏—Å–∞–Ω—ñ —â–µ –¥–æ –ø–æ—á–∞—Ç–∫—É —Ä–æ–∑—Ä–æ–±–∫–∏ - —Ç–æ —è —Ö–æ—á–∞–± –º–∞–≤ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–≤—ñ—Ä–∏—Ç–∏ —ó—Ö –≤ –ø—Ä–æ—Ü–µ—Å—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ –ø–æ –ø–æ–ª—è—Ö —ñ –±—ñ–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å–∞–≤–∏—Ç–∏ "–≥–∞–ª–æ—á–∫—É" - –≤–∫–ª—é—á–∏–≤ –≤ —Ä–µ–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–º–æ–ª–µ–Ω–Ω—è.

6. –ù–∞ –ø–æ—á–∞—Ç–∫—É, —è –≤ —á–µ—Ä–≥–∏ —Å–∫–ª–∞–¥–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫ plain text.  –¢–∞–∫, —Ü–µ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø—ñ–¥—Ö—ñ–¥, –∞–ª–µ —ñ –Ω–∞–π–±—ñ–ª—å—à –Ω–µ –Ω–∞–¥—ñ–π–Ω–∏–π. –ó–º—ñ–Ω–∏—Ç–∏ –ø—ñ–¥—Ö—ñ–¥ –º–µ–Ω–µ –∑–º—É—Å–∏–≤ –≤–±—É–¥–≤–∞–Ω–∏–π –≤ Durable Fucntion  —Ç—Ä–∏–≥–µ—Ä, —â–æ –ø—Ä–∏–π–º–∞—î —Ç—ñ–ª—å–∫–∏ Base64 Encoded –ø–æ–≤—ñ–¥–º–ª–µ–Ω–Ω—è.

–ß–æ–º—É —è –∑—Ä–æ–±–∏–≤ —Ü—ñ –ø–æ–º–∏–ª–∫–∏? –¢–∞ —Ç–æ–º—É —â–æ —è –Ω–∞–≤—á–∞–≤—Å—è —ñ –Ω–µ –º–∞—é –¥–æ—Å–≤—ñ–¥—É —Ö–º–∞—Ä–Ω–æ–≥–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä–∞, –Ω–µ –∑–≤–∞–∂–∞—é—á–∏ —â–æ —è –ø—Ä–æ—á–∏—Ç–∞–≤ —ñ —á–∞—Å—Ç–∏–Ω—É –∫—É—Ä—Å—ñ–≤ —Ö–º–∞—Ä–Ω–æ–≥–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä–∞. –ù–∞ –¥–∏–≤–æ üòÅ, —É —Ç—Ä—å–æ—Ö –≤—ñ–¥–æ–º–∏—Ö —Ö–º–∞—Ä–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ –∫–Ω–∞–≤—á–∞–ª—å–Ω—ñ –∫—É—Ä—Å–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä—ñ–≤ —Ç–∞ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ —Å–ø—ñ–ª—å–Ω—ñ –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ —Ç–∞–∫ –Ω–∞ 50%. –¢–∞–∫–∏–º —á–∏–Ω–æ–º —è  –Ω–µ —Ä–æ–∑—Ä–æ–±–∏–≤ –¥–µ—Ç–∞–ª—å–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏, –∞ –≤–∂–µ –ø–æ—á–∞–≤ –∫–æ–¥–∏—Ç–∏. –¢–µ–ø–µ—Ä —É—è–≤–∏–º–æ —â–æ  —Ü–µ –± –±—É–≤ —Ä–µ–ª–∞—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç. –ß–∏–º –±–∏ –≤—ñ–Ω –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è, –∞ –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –±—ñ–ª—å–≥–µ –Ω—ñ–∂ –æ–¥–∏–Ω —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ - –Ω–µ–ø—Ä–∏—î–º–Ω–æ—Å—Ç—è–º–∏ –Ω–∞ 100%. –í—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ —è –∑—Ä–æ–±–∏–≤ –≤–∏—Å–Ω–æ–≤–∫–∏ —ñ —Å—Ñ–æ—Ä–º—É–ª—é–≤–∞–≤  **"–ú–∞–Ω—ñ—Ñ–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–º–∞–ª—é–≤–∞–ª—å–Ω–∏–∫–∞ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫—ñ–≤¬ª —É Visio"**.

- –©–æ –∫–æ—Ä–∏—Å–Ω–æ–≥–æ —è –æ—Ç—Ä–∏–º–∞–≤ —á–∏ –∑–Ω–∞–π—à–æ–≤ –≤ —Ü—å–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ

1. –°—Ñ–æ—Ä–º—É–ª—é–≤–∞–≤  **"–ú–∞–Ω—ñ—Ñ–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–º–∞–ª—é–≤–∞–ª—å–Ω–∏–∫–∞ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫—ñ–≤¬ª —É Visio"**.

–û—Å—å —è–∫ –º–∞—î –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ü–µ–π ¬´–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏–π –º—ñ–Ω—ñ–º—É–º¬ª, —è–∫–∏–π –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –ø—ñ–¥–≥–æ—Ç–æ–≤–∞–Ω–∏—Ü–π –¥–æ –ø–æ—á–∞—Ç–∫—É —Ä–æ–∑—Ä–æ–±–∫–∏:

üó∫Ô∏è 1. –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤ (Data Contracts)

–ê—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä –ø–æ–≤–∏–Ω–µ–Ω –∑–∞—Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–º–∏ —à–ª–µ–º–æ JSON¬ª, –∞ —á—ñ—Ç–∫—É —Å—Ö–µ–º—É –¥–ª—è –∫–æ–∂–Ω–æ—ó —á–µ—Ä–≥–∏ —Ç–∞ API:
    –û–±–æ–≤‚Äô—è–∑–∫–æ–≤—ñ –ø–æ–ª—è: (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, instance_id ‚Äî —Ü–µ ¬´–ø–∞—Å–ø–æ—Ä—Ç¬ª –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è).
    –¢–∏–ø–∏ –¥–∞–Ω–∏—Ö: (—Ä—è–¥–æ–∫, —á–∏—Å–ª–æ, —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç–∏ ISO 860)7.
    –í–µ—Ä—Å—ñ–π–Ω—ñ—Å—Ç—å: –©–æ –±—É–¥–µ, —è–∫—â–æ –º–∏ –¥–æ–¥–∞–º–æ –Ω–æ–≤–µ –ø–æ–ª–µ? –ß–∏ –Ω–µ ¬´–≤–ø–∞–¥–µ¬ª —Å—Ç–∞—Ä–∏–π –≤–æ—Ä–∫–µ—Ä?

üîë 2. –ö–∞—Ä—Ç–∞ Credentials —Ç–∞ Identity (Security Mapping)

–í —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ ¬´—Ö—Ç–æ –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —á–æ–≥–æ¬ª ‚Äî —Ü–µ –Ω–µ –∑–∞–¥–∞—á–∞ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, —Ü–µ –¥–∏–∑–∞–π–Ω –±–µ–∑–ø–µ–∫–∏.
    Managed Identity: –ê—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä –º–∞—î –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —â–æ –§—É–Ω–∫—Ü—ñ—è –º–∞—î —Ä–æ–ª—å Storage Queue Data Contributor.
    Secret Management: –î–µ –ª–µ–∂–∞—Ç—å –∫–ª—é—á—ñ? (Azure Key Vault).
    Scopes: –ß–∏ –º–∞—î –≤–æ—Ä–∫–µ—Ä –¥–æ—Å—Ç—É–ø –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –±–ª–æ–±—ñ–≤, —á–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è?

üèóÔ∏è 3. –¢–æ–ø–æ–ª–æ–≥—ñ—è —Ç–∞ DevOps-–∫–∞—Ä—Ç–∞ (Deployment Map)

–ê—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä –º–∞–ª—é—î ¬´–∫–∞—Ä—Ç—É –±–æ–π–æ–≤–∏—Ö –¥—ñ–π¬ª DevOps:
    Runtime: –î–µ –ø—Ä–∞—Ü—é—î –∫–æ–¥? (Function ‚Äî –¥–ª—è –ª–æ–≥—ñ–∫–∏, Container ‚Äî –¥–ª—è GPU/ML).
    Scaling: –ü—Ä–∏ —è–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É —á–µ—Ä–∑—ñ –º–∏ –∑–∞–ø—É—Å–∫–∞—î–º–æ –¥—Ä—É–≥–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä? (KEDA-—Ç—Ä–∏–≥–µ—Ä–∏).
    Networking: –Ø–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ¬´–±–∞—á–∏—Ç—å¬ª —á–µ—Ä–≥—É? (VNET, Private Endpoints).

–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ?
–ë–µ–∑ —Ç–∞–∫–æ—ó –∫–∞—Ä—Ç–∏ —Ä–æ–∑—Ä–æ–±–∫–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ ¬´—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–µ –ø–µ–∫–ª–æ¬ª, –¥–µ –∫–æ–∂–µ–Ω —Ä–æ–∑—Ä–æ–±–Ω–∏–∫:
    –í–∏–≥–∞–¥—É—î —Å–≤–æ—ó –Ω–∞–∑–≤–∏ –ø–æ–ª—ñ–≤ (blob_url vs blobUrl vs Url).
    –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä—ñ–∑–Ω—ñ –º–µ—Ç–æ–¥–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—è (Base64 vs Clear Text).
    –°—Ç–≤–æ—Ä—é—î ¬´–¥—ñ—Ä–∫–∏¬ª –≤ –±–µ–∑–ø–µ—Ü—ñ, –±–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø—ñ—é—î Connection String —É –∫–æ–¥.


2. –û—Ä–≥–∞–Ω—ñ–∑—É–≤–∞–Ω–Ω—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ Jupyter Notebook. 
–¢—É—Ç —Å–ª—ñ–¥  –Ω–∞–≥–æ–ª–æ—Å–∏—Ç–∏ –Ω–∞ —Ç–æ–º—É —â–æ  –Ω–∞–≤—á–∏–≤—Å—è  —Ä–æ–±–∏—Ç–∏  –ø—Ä–æ–µ–∫—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ Jupiter Notebook  —â–æ –æ—Ä–≥–∞–Ω—ñ—á–Ω–æ –≤–∫–ª–∞–¥–µ—Ç—å—Å—è –≤ —Å–∞–º –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–π –ø—Ä–æ–µ–∫—Ç —ñ, –æ–¥–Ω–æ—á–∞—Å–Ω–æ, –Ω–µ –±—É–¥–µ –π–æ–º—É –∑–∞–≤–∞–∂–∞—Ç–∏. –¢–∞–∫–æ–∂ –≤—ñ–¥–ø—Ä–∞—Ü—é–≤–∞–≤ –∑–∞–¥–∞–≤–∞–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –Ω–µ –≤ Jupyter Notebook  –∞ —á–µ—Ä–µ–∑ env-–∑–º—ñ–Ω—ñ. –Ü, –Ω–∞—Ä–µ—à—Ç—ñ, –Ω–∞–π–≥–æ–ª–æ–≤–Ω—ñ—à–µ - –Ω–∞–≤—á–∏–≤—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω—ñ –º–æ–¥—É–ª—ñ –¥–æ Jupyter Notebook  —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∑—Ä–æ–±–∏—Ç–∏ –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω—ñ –∫–æ–º—ñ—Ä–∫–∏ –º–∞–ª–µ–Ω—å–∫–∏–º–∏ —ñ —Ç–∞–∫–∏–º–∏ —â–æ  –≤–∏–∫–æ–Ω—É—é—Ç—å —Ç—ñ–ª—å–∫–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ–π–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é. –ê –≤—Å—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∏–Ω–ª—Å–∏—Ç–∏ –≤ —Ü—ñ –º–æ–¥—É–ª—ñ. 

3. –Ø–∫—â–æ —î –±–∞–∂–∞–Ω–Ω—è –∑–∞–π–º–∞—Ç–∏—Å—è —à—Ç—É—á–Ω–∏–º —ñ–Ω—Ç–µ–ª–µ–∫—Ç–æ–º, –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥: –Ω–∞–≤—á–∏—Ç–∏ –Ω–µ–π—Ä–æ–Ω–∫—É —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ —è–∫—ñ—Å—å –æ–±—Ä–∞–∑–∏. –í–∞–º –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –Ω–µ 20-30 –∑–æ–±—Ä–∞–¥–µ–Ω—å  —Ç–∏—Ö –æ–±—Ä–∞—Ö—ñ–≤, –∞ –Ω–∞–±–∞–≥–∞—Ç–æ –±—ñ–ª—å—à–µ. –ë—ñ–ª—å—à —Ç–æ–≥–æ, —Ü—ñ –≤—Å—ñ –∫–∞—Ä—Ç–∏–Ω–∫–∏, —Ç–µ–∫—Å—Ç–∏, –≤—ñ–¥–µ–æ - –ø–æ–≤–∏–Ω–Ω—ñ –±—É–¥—É—Ç—å –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —à–∞—Ä–∏ –∞–Ω–∞–ª—ñ–∑—É, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–∏—Ö, –Ω–∞–≤—ñ—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó. –Ü –æ—Ü–µ–π –ø—Ä–æ–µ–∫—Ç - —Ü–µ —î –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—é —ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ—é –º–æ–¥–µ–ª–ª—é Data PipeLine —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –Ω–∞–¥—ñ–π–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç–∏ –æ–±—Ä–æ–±–∫–æ—é —Ç–∞–∫–∏—Ö –¥–∞–Ω–∏—Ö.  




